<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    * {
      box-sizing: border-box;
    }
    </style>

    <link rel="stylesheet" href="setAlarm.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
      $(document).on('click', "#saveButton", function (evt) {
        hourBox = document.getElementById("hoursCB");
        minuteBox = document.getElementById("minsCB");
        secondsBox = document.getElementById("secondsCB");
        label = document.getElementById("labelTF");

        const today = new Date();
        let h = today.getHours();
        let m = today.getMinutes();
        let s = today.getSeconds();
        
        totalHours = prependZero((h + parseInt(hourBox.value))%24)
        totalMin = prependZero((m + parseInt(minuteBox.value))%60)
        totalSecs = prependZero((s + parseInt(secondsBox.value))%60)

        var alarmText = label.value+":  Alarm at (" +totalHours+":"+totalMin+":"+totalSecs+")";

        let days = document.querySelectorAll("input[type='checkbox']:checked");
        console.log(days.length)
        if (days.length != 0){
          alarmText = alarmText+"; repeated every "
          days.forEach(function(cb){
            alarmText = alarmText+cb.value+", ";
          });
        }

        var alarm = document.createElement("p");
        alarm.innerHTML = alarmText;
        alarm.style.textAlign = "center";
        document.getElementById("savedAlarms").appendChild(alarm);

      });

      function prependZero(i) {
        return (i < 10 ? "0"+i : i);

}

      $(document).on('click', "#clearButton", function (evt) {
        hourBox = document.getElementById("hoursCB");
        minuteBox = document.getElementById("minsCB");
        secondsBox = document.getElementById("secondsCB");

        hourBox.selectedIndex = 0 
        minuteBox.selectedIndex = 0
        secondsBox.selectedIndex = 0 

        monday = document.getElementById("mondayToggle");
        tuesday = document.getElementById("tuesdayToggle");
        wednesday = document.getElementById("wednesdayToggle");
        thursday = document.getElementById("thursdayToggle");
        friday = document.getElementById("fridayToggle");
        saturday = document.getElementById("saturdayToggle");
        sunday = document.getElementById("sundayToggle");

        label = document.getElementById("labelTF");
        label.value = ""

        let checked = document.querySelectorAll("input[type='checkbox']:checked");
        checked.forEach(function(cb){
          cb.checked = false
        });

      });

    </script>

  </head>
  <body style="background-color:pink;">
    <table class="timer">
      <div>
        <button class="btnQuit" type="button" id="quit" onclick="self.close()">Quit</button>
      </div>
      <h1 style="text-align: center; font-family: Comic Sans MS">Set Alarm</h1>
      <tr class ="timerRow">
        <td>
          <b>Hours</b>
        </td>
        <td>
          <b>Minutes</b>
        </td>
        <td>
          <b>Seconds</b>
        </td>
      </tr>
      <tr class="timerRow">
        <td>
          <select name="hoursComboBox" id="hoursCB" >
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
          </select>
        </td>
        <td>
          <select name="minutesComboBox" id="minsCB">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
            <option value="32">32</option>
            <option value="33">33</option>
            <option value="34">34</option>
            <option value="35">35</option>
            <option value="36">36</option>
            <option value="37">37</option>
            <option value="38">38</option>
            <option value="39">39</option>
            <option value="40">40</option>
            <option value="41">41</option>
            <option value="42">42</option>
            <option value="43">43</option>
            <option value="44">44</option>
            <option value="45">45</option>
            <option value="46">46</option>
            <option value="47">47</option>
            <option value="48">48</option>
            <option value="49">49</option>
            <option value="50">50</option>
            <option value="51">51</option>
            <option value="52">52</option>
            <option value="53">53</option>
            <option value="54">54</option>
            <option value="55">55</option>
            <option value="56">56</option>
            <option value="57">57</option>
            <option value="58">58</option>
            <option value="59">59</option>
            <option value="60">60</option>
          </select>
        </td>
        <td>
          <select name="secondsComboBox" id="secondsCB">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
            <option value="32">32</option>
            <option value="33">33</option>
            <option value="34">34</option>
            <option value="35">35</option>
            <option value="36">36</option>
            <option value="37">37</option>
            <option value="38">38</option>
            <option value="39">39</option>
            <option value="40">40</option>
            <option value="41">41</option>
            <option value="42">42</option>
            <option value="43">43</option>
            <option value="44">44</option>
            <option value="45">45</option>
            <option value="46">46</option>
            <option value="47">47</option>
            <option value="48">48</option>
            <option value="49">49</option>
            <option value="50">50</option>
            <option value="51">51</option>
            <option value="52">52</option>
            <option value="53">53</option>
            <option value="54">54</option>
            <option value="55">55</option>
            <option value="56">56</option>
            <option value="57">57</option>
            <option value="58">58</option>
            <option value="59">59</option>
            <option value="60">60</option>
          </select>
        </td>
      </tr>
    </table>
    
    <div class="timerSettings">
      <label class="label-checkbox" id="mondayToggle">
        <input type="checkbox" value="Monday">
        <span>Monday</span>
      </label>
      <label class="label-checkbox" id="tuesdayToggle">
        <input type="checkbox" value="Tuesday">
        <span>Tuesday</span>
      </label>
      <label class="label-checkbox" id="wednesdayToggle">
        <input type="checkbox" value="Wednesday">
        <span>Wednesday</span>
      </label>      
      <label class="label-checkbox" id="thursdayToggle">
        <input type="checkbox" value="Thursday">
        <span>Thursday</span>
      </label>
      <label class="label-checkbox" id="fridayToggle">
        <input type="checkbox" value="Friday">
        <span>Friday</span>
      </label>
      <label class="label-checkbox" id="saturdayToggle">
        <input type="checkbox" value="Saturday">
        <span>Saturday</span>
      </label>
      <label class="label-checkbox" id="sundayToggle">
        <input type="checkbox" value="Sunday">
        <span>Sunday</span>
      </label>


      <br>
      <br>
      Label
      <input class="labelTF" id ="labelTF"
          type="text"
          placeholder="Enter label here...">
      <br>
      <br>
      <button style="font-family:Comic Sans MS" class="saveButton" id="saveButton">Save</button>
      <button style="font-family:Comic Sans MS" class="clearButton" id="clearButton">Clear</button>
    </div>

    <div class="savedAlarmsList" id="savedAlarms">
      <h2 style="text-align: center; font-family:Comic Sans MS">Saved Alarms</h2>
    </div>


    <div class="row5">
      <div class="menu">
        <div class="icon">
          <a class="label" id="home" href="./home.html">
            <img class="logo" src="https://cdn.discordapp.com/attachments/1015387519396880414/1039605969589637241/unknown.png" />
          </a>
          <a class="label" id="home" href="./home.html">Home</a>
        </div>
        <div class="icon">
          <a class="label" id="note" href="./make_note.html">
            <img class="logo" src="https://cdn.discordapp.com/attachments/1015387519396880414/1039606955926364292/unknown.png" /></a>
          <a class="label" id="note" href="./make_note.html">Make Notes</a>
        </div>
        <div class="icon">
          <a class="label" id="alarm" href="./mediaPage.html">
            <img class="logo" src="https://cdn-icons-png.flaticon.com/512/3126/3126453.png" />
          </a>
          <a class="label" id="alarm" href="./mediaPage.html">Play Video/Music</a>
        </div>
        <div class="icon">
          <a class="label" id="doctor" href="./Online_Consult.html">
            <img class="logo" src="https://cdn.discordapp.com/attachments/1015387519396880414/1039606319805644911/unknown.png" />
          </a>
          <a class="label" id="doctor" href="./Online_Consult.html">Online Consult</a>
        </div>
      </div>
    </div>
  </body>
</html>
